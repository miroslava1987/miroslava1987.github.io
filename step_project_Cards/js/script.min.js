import{VisitCardiologist,VisitDentist,VisitTherapist}from"./doctors/index.js";import{getAllCards}from"./ajax/ajax.js";import{CreateBtn,EnterBtn}from"./forms/components/buttons.js";function onLoad(){const e=sessionStorage.getItem("token"),t=document.querySelector(".header__buttons");e?t.append(CreateBtn):t.append(EnterBtn)}function renderCards(e){switch(e.doctor){case"Терапевт":new VisitTherapist(e).render();break;case"Кардиолог":new VisitCardiologist(e).render();break;case"Дантист":new VisitDentist(e).render()}}document.addEventListener("DOMContentLoaded",onLoad);const filterBtn=document.querySelector(".filter__btn");function clearCards(){const e=document.querySelector(".visit, .container");e.querySelectorAll(".visit-cards").forEach(e=>e.remove()),e.querySelector(".visit__title").classList.toggle("hidden")}filterBtn.addEventListener("click",async e=>{const t=document.querySelector(".filter__search").value,r=document.querySelector("#time-select").value,n=document.querySelector(".filter__time > select").value;clearCards();(await getAllCards()).data.forEach(e=>{const o=new Date<new Date(e["date-visit"])?"Открыт":"Завершен",{time:a,...s}=e;a===n&&r===o&&(t&&Object.values(s).filter(r=>{r===t&&renderCards(e)}),t||renderCards(e))})});const clearBtn=document.querySelector(".filter__btn-clr");clearBtn.addEventListener("click",clearCards);let modal=document.querySelector(".modal");modal.addEventListener("click",e=>{let t=document.querySelector(".modal-window");"modal"===e.target.className&&(modal.style.display="none",t.remove(),document.body.classList.remove("scroll-hidden"))});export default renderCards;